[dotenv@17.2.1] injecting env (6) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
üöÄ Initializing scraper job service...
‚ùå Failed to load scrapers: Error: Cannot find module '../scrapers/nvrcWorkingHierarchicalScraper'
Require stack:
- /Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js
- /Users/mike/Development/KidsActivityTracker/backend/api/server.js
    at Function._resolveFilename (node:internal/modules/cjs/loader:1405:15)
    at defaultResolveImpl (node:internal/modules/cjs/loader:1061:19)
    at resolveForCJSWithHooks (node:internal/modules/cjs/loader:1066:22)
    at Function._load (node:internal/modules/cjs/loader:1215:37)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1491:12)
    at require (node:internal/modules/helpers:135:16)
    at ScraperJobService.loadScrapers (/Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js:57:46)
    at ScraperJobService.initialize (/Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js:38:16) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js',
    '/Users/mike/Development/KidsActivityTracker/backend/api/server.js'
  ]
}
‚úÖ Cron scheduler started (every 1 hour(s))
‚úÖ Scraper job service initialized
üöÄ API server running on http://localhost:3000
üìä Environment: development

Available endpoints:
- GET  /api/v1/activities
- GET  /api/v1/activities/:id
- GET  /api/v1/activities/stats/summary
- POST /api/v1/users
- GET  /api/v1/users/:email
- POST /api/v1/favorites
- GET  /api/v1/users/:userId/favorites
- GET  /api/v1/providers
- GET  /api/v1/locations
- GET  /api/v1/categories
- GET  /api/v1/scraper/jobs
- POST /api/v1/scraper/trigger
- GET  /api/v1/stats/dashboard
prisma:info Starting a postgresql pool with 21 connections.
prisma:query BEGIN
prisma:query UPDATE "public"."ScrapeJob" SET "status" = CAST($1::text AS "public"."JobStatus"), "completedAt" = $2, "errorMessage" = $3 WHERE ("public"."ScrapeJob"."status" = CAST($4::text AS "public"."JobStatus") AND "public"."ScrapeJob"."startedAt" < $5)
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.scrapeJob.updateMany()` invocation in
/Users/mike/Development/KidsActivityTracker/backend/database/services/scrapeJobService.js:190:29

  187 const staleTime = new Date();
  188 staleTime.setMinutes(staleTime.getMinutes() - maxAgeMinutes);
  189 
‚Üí 190 return prisma.scrapeJob.updateMany(
The table `public.ScrapeJob` does not exist in the current database.
‚ùå Error scheduling scrape jobs: PrismaClientKnownRequestError: 
Invalid `prisma.scrapeJob.updateMany()` invocation in
/Users/mike/Development/KidsActivityTracker/backend/database/services/scrapeJobService.js:190:29

  187 const staleTime = new Date();
  188 staleTime.setMinutes(staleTime.getMinutes() - maxAgeMinutes);
  189 
‚Üí 190 return prisma.scrapeJob.updateMany(
The table `public.ScrapeJob` does not exist in the current database.
    at ri.handleRequestError (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:7459)
    at ri.handleAndLogRequestError (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:6784)
    at ri.request (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:6491)
    at async l (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:133:9812)
    at async ScraperJobService.scheduleScrapingJobs (/Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js:112:7) {
  code: 'P2021',
  meta: { modelName: 'ScrapeJob', table: 'public.ScrapeJob' },
  clientVersion: '6.12.0'
}
prisma:query SELECT COUNT("public"."Activity"."subcategory"), "public"."Activity"."subcategory" FROM "public"."Activity" WHERE "public"."Activity"."isActive" = $1 GROUP BY "public"."Activity"."subcategory" OFFSET $2
Activity types before consolidation: [
  { name: 'Swimming', count: 895 },
  { name: 'Swimming - Aquatic Leadership', count: 13 },
  { name: 'Private Lessons Swimming', count: 33 }
]
Activity types after consolidation: [ { name: 'Swimming', count: 941 } ]
[0mGET /api/v1/activity-types [32m200[0m 84.917 ms - 689[0m
prisma:query SELECT 1
prisma:query SELECT COUNT("public"."Activity"."subcategory"), "public"."Activity"."subcategory" FROM "public"."Activity" WHERE "public"."Activity"."isActive" = $1 GROUP BY "public"."Activity"."subcategory" OFFSET $2
Activity types before consolidation: [
  { name: 'Swimming', count: 895 },
  { name: 'Swimming - Aquatic Leadership', count: 13 },
  { name: 'Private Lessons Swimming', count: 33 }
]
Activity types after consolidation: [ { name: 'Swimming', count: 941 } ]
[0mGET /api/v1/activity-types [32m200[0m 5.645 ms - 689[0m
prisma:query SELECT COUNT("public"."Activity"."subcategory"), "public"."Activity"."subcategory" FROM "public"."Activity" WHERE "public"."Activity"."isActive" = $1 GROUP BY "public"."Activity"."subcategory" OFFSET $2
Activity types before consolidation: [
  { name: 'Swimming', count: 895 },
  { name: 'Swimming - Aquatic Leadership', count: 13 },
  { name: 'Private Lessons Swimming', count: 33 }
]
Activity types after consolidation: [ { name: 'Swimming', count: 941 } ]
[0mGET /api/v1/activity-types [32m200[0m 200.890 ms - 689[0m
üïê Running scheduled scrape check...
prisma:query BEGIN
prisma:query UPDATE "public"."ScrapeJob" SET "status" = CAST($1::text AS "public"."JobStatus"), "completedAt" = $2, "errorMessage" = $3 WHERE ("public"."ScrapeJob"."status" = CAST($4::text AS "public"."JobStatus") AND "public"."ScrapeJob"."startedAt" < $5)
prisma:query ROLLBACK
prisma:error 
Invalid `prisma.scrapeJob.updateMany()` invocation in
/Users/mike/Development/KidsActivityTracker/backend/database/services/scrapeJobService.js:190:29

  187 const staleTime = new Date();
  188 staleTime.setMinutes(staleTime.getMinutes() - maxAgeMinutes);
  189 
‚Üí 190 return prisma.scrapeJob.updateMany(
The table `public.ScrapeJob` does not exist in the current database.
‚ùå Error scheduling scrape jobs: PrismaClientKnownRequestError: 
Invalid `prisma.scrapeJob.updateMany()` invocation in
/Users/mike/Development/KidsActivityTracker/backend/database/services/scrapeJobService.js:190:29

  187 const staleTime = new Date();
  188 staleTime.setMinutes(staleTime.getMinutes() - maxAgeMinutes);
  189 
‚Üí 190 return prisma.scrapeJob.updateMany(
The table `public.ScrapeJob` does not exist in the current database.
    at ri.handleRequestError (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:7459)
    at ri.handleAndLogRequestError (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:6784)
    at ri.request (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:124:6491)
    at async l (/Users/mike/Development/KidsActivityTracker/backend/generated/prisma/runtime/library.js:133:9812)
    at async ScraperJobService.scheduleScrapingJobs (/Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js:112:7)
    at async /Users/mike/Development/KidsActivityTracker/backend/services/scraperJobService.js:97:7
    at async Timeout._onTimeout (/Users/mike/Development/KidsActivityTracker/backend/node_modules/node-cron/dist/cjs/scheduler/runner.js:70:44) {
  code: 'P2021',
  meta: { modelName: 'ScrapeJob', table: 'public.ScrapeJob' },
  clientVersion: '6.12.0'
}
