
> kidsactivitytracker-backend@1.0.0 start
> node server.js

âœ… NVRC Real Data scraper loaded successfully - NO SAMPLE DATA!
Kids Activity Tracker API running on http://localhost:3000

Available endpoints:
- POST /api/scrape/nvrc (main endpoint - uses interactive scraper)
- GET /api/scrape/nvrc-interactive (test interactive scraper directly)
- POST /api/activities/search
- GET /api/activities/:id
- POST /api/register
- POST /api/refresh

âœ… Server is ready to receive requests!
ğŸ“ Note: First scrape may take 30-60 seconds to load all results
ğŸš€ Running NVRC Real Data scraper - NO SAMPLE DATA!
ğŸš€ Starting NVRC Real Data Scraper - NO SAMPLE DATA!

ğŸ“ Navigating to NVRC Find Program page...
PAGE LOG: Failed to load resource: the server responded with a status of 404 ()
PAGE LOG: The keyword 'push-button' used on the 'appearance' property was deprecated and has now been removed. It will no longer have any effect.
  Current URL: https://www.nvrc.ca/programs-memberships/find-program

â³ Waiting for search form to load...
ğŸ“¸ Form page screenshot saved

ğŸ“‹ Found checkboxes: [
  {
    id: 'edit-programs-adult',
    name: 'programs[Adult]',
    value: 'Adult',
    checked: false,
    labelText: 'Adult'
  },
  {
    id: 'edit-programs-all-ages-family',
    name: 'programs[All Ages & Family]',
    value: 'All Ages & Family',
    checked: false,
    labelText: 'All Ages & Family'
  },
  {
    id: 'edit-programs-early-years-on-my-own',
    name: 'programs[Early Years: On My Own]',
    value: 'Early Years: On My Own',
    checked: false,
    labelText: '0 - 6 years, On My Own'
  },
  {
    id: 'edit-programs-early-years-parent-participation',
    name: 'programs[Early Years: Parent Participation]',
    value: 'Early Years: Parent Participation',
    checked: false,
    labelText: '0 - 6 years, Parent Participation'
  },
  {
    id: 'edit-programs-school-age',
    name: 'programs[School Age]',
    value: 'School Age',
    checked: false,
    labelText: '5 - 13 years, School Age'
  },
  {
    id: 'edit-programs-senior',
    name: 'programs[Senior]',
    value: 'Senior',
    checked: false,
    labelText: 'Senior'
  },
  {
    id: 'edit-programs-youth',
    name: 'programs[Youth]',
    value: 'Youth',
    checked: false,
    labelText: '10 - 18 years, Youth'
  }
]

ğŸ“‹ STEP 1: Selecting ONLY kids age groups...
  Initial checkbox states: [
  { text: 'Adult', checked: false },
  { text: 'All Ages & Family', checked: false },
  { text: '0 - 6 years, On My Own', checked: false },
  { text: '0 - 6 years, Parent Participation', checked: false },
  { text: '5 - 13 years, School Age', checked: false },
  { text: 'Senior', checked: false },
  { text: '10 - 18 years, Youth', checked: false }
]
  ğŸ”„ Unchecking ALL age groups...
  âœ“ Unchecked 0 checkboxes
  âœ“ Selected: 0 - 6 years, Parent Participation
  âœ“ Selected: 0 - 6 years, On My Own
  âœ“ Selected: 5 - 13 years, School Age
  âœ“ Selected: 10 - 18 years, Youth
  Total kids age groups selected: 4/4
  âœ… Verified: No Adult, Senior, or All Ages selected

â³ Waiting for Step 2 program activities to appear...
  â³ Waiting up to 30 seconds for Step 2 to load...
PAGE LOG: Found 13 activity checkboxes
  âœ… Step 2 activities fully loaded!
ğŸ“¸ Screenshot saved: after-step1-wait.png

ğŸ¯ STEP 2: Selecting ALL program activities...
  ğŸ“‚ Expanding all activity sections...
  âœ“ Expanded 2 sections
  âœ… Selecting ALL program activities...
PAGE LOG: Selected activity: Spin
PAGE LOG: Selected activity: Strength & Cardio
PAGE LOG: Selected activity: Yoga
PAGE LOG: Selected activity: Aquatic Leadership
PAGE LOG: Selected activity: Camps
PAGE LOG: Selected activity: Certifications and Leadership
PAGE LOG: Selected activity: Learn and Play
PAGE LOG: Selected activity: Martial Arts
PAGE LOG: Selected activity: Swimming
PAGE LOG: Selected activity: Racquet Sports
PAGE LOG: Selected activity: Team Sports
PAGE LOG: Selected activity: Dance
PAGE LOG: Selected activity: Visual Arts
  âœ… Found 13 activity checkboxes
  âœ… Selected 13 new activities
  â„¹ï¸ Skipped 7 non-activity checkboxes
  Sample activities selected: [
  'Spin',
  'Strength & Cardio',
  'Yoga',
  'Aquatic Leadership',
  'Camps',
  'Certifications and Leadership',
  'Learn and Play',
  'Martial Arts',
  'Swimming',
  'Racquet Sports'
]
ğŸ“¸ Screenshot saved: after-step2-selection.png

â³ Waiting for Step 3 locations to appear (this may take up to 30 seconds)...
PAGE LOG: Found "Select all locations" option!
  âœ… Step 3 locations loaded!

ğŸ“ STEP 3: Selecting all locations...
  ğŸ” Looking for "Select all locations available" checkbox...
  Result: clicked "Select all locations available"
ğŸ“¸ Screenshot saved: after-step3-selection.png

ğŸ” Looking for "Show Results" button...
  Button state: {
  found: true,
  text: 'Show Results',
  disabled: false,
  className: 'button js-form-submit form-submit',
  tag: 'INPUT'
}
PAGE LOG: Clicking Show Results button
  Submit result: clicked Show Results button

â³ Waiting for results to load...
PAGE LOG: Failed to load resource: the server responded with a status of 404 ()
PAGE LOG: The keyword 'push-button' used on the 'appearance' property was deprecated and has now been removed. It will no longer have any effect.
  Results page URL: https://www.nvrc.ca/programs-memberships/find-program/results?programs=Early%20Years%3A%20On%20My%20Own%2FEarly%20Years%3A%20Parent%20Participation%2FSchool%20Age%2FYouth&activities=fitness_spin%2Ffitness_strength_cardio%2Ffitness_yoga%2Factivities_aquatic_leadership%2Factivities_camps%2Factivities_certifications_and_leadership%2Factivities_learn_and_play%2Factivities_martial_arts%2Factivities_swimming%2Fsports_racquet_sports%2Fsports_team_sports%2Farts_culture_dance%2Farts_culture_visual_arts&locations=0ca97f73-c2d6-45b9-b9a3-8d3346945ca8%2F5500906d-d5ea-422b-a21b-71fadc7c05ad%2Fad9f1d30-91c6-4779-a5fd-e0109e69a8d6%2Fe153c19a-14a3-4b81-a121-13f1ec7405fc%2Fdc8b1026-3fc7-4d2d-bd1a-917134362de9%2Fffbf31ae-84f3-495b-83d1-1a7f573db3c8%2F8e7483a5-b29f-4d07-9f46-a8ca770a8cd6%2F1b275d54-b65d-4169-94cd-847d1644ccc7%2F143ff434-0589-4785-9f34-334cfc713c2b%2F9c388e73-ed3c-4f82-85bd-cc6cf0fb0a68%2Ff67610ba-64ff-4176-9f59-81b27a23cbab%2F36b507b6-c584-4b7e-99c8-0eb5f3869f4d%2F346dc9e5-e7a4-4bf1-805f-a7d191295dcc%2F72be6805-1624-446d-9597-b70401b78293%2Fca06eca9-4cc5-4d1e-82fd-24c0610569d1%2Fe5aebf2f-6163-43d8-b780-a90379b62026
ğŸ“¸ Results page screenshot saved

ğŸ“Š Extracting REAL activities from results...

ğŸ” Waiting for activity results to load...
  âš ï¸ Standard selectors not found, checking for any results...

ğŸ“Š Results page structure: {
  url: 'https://www.nvrc.ca/programs-memberships/find-program/results?programs=Early%20Years%3A%20On%20My%20Own%2FEarly%20Years%3A%20Parent%20Participation%2FSchool%20Age%2FYouth&activities=fitness_spin%2Ffitness_strength_cardio%2Ffitness_yoga%2Factivities_aquatic_leadership%2Factivities_camps%2Factivities_certifications_and_leadership%2Factivities_learn_and_play%2Factivities_martial_arts%2Factivities_swimming%2Fsports_racquet_sports%2Fsports_team_sports%2Farts_culture_dance%2Farts_culture_visual_arts&locations=0ca97f73-c2d6-45b9-b9a3-8d3346945ca8%2F5500906d-d5ea-422b-a21b-71fadc7c05ad%2Fad9f1d30-91c6-4779-a5fd-e0109e69a8d6%2Fe153c19a-14a3-4b81-a121-13f1ec7405fc%2Fdc8b1026-3fc7-4d2d-bd1a-917134362de9%2Fffbf31ae-84f3-495b-83d1-1a7f573db3c8%2F8e7483a5-b29f-4d07-9f46-a8ca770a8cd6%2F1b275d54-b65d-4169-94cd-847d1644ccc7%2F143ff434-0589-4785-9f34-334cfc713c2b%2F9c388e73-ed3c-4f82-85bd-cc6cf0fb0a68%2Ff67610ba-64ff-4176-9f59-81b27a23cbab%2F36b507b6-c584-4b7e-99c8-0eb5f3869f4d%2F346dc9e5-e7a4-4bf1-805f-a7d191295dcc%2F72be6805-1624-446d-9597-b70401b78293%2Fca06eca9-4cc5-4d1e-82fd-24c0610569d1%2Fe5aebf2f-6163-43d8-b780-a90379b62026',
  title: 'Activity Search Results | North Vancouver Recreation and Culture Commission',
  hasActivities: true,
  activityGroups: 0,
  listGroups: 0,
  panels: 0,
  tables: 0,
  courseRows: 718,
  activityCards: 0,
  masterRows: 0,
  detailRows: 0,
  expandedRows: 0
}

ğŸ“‹ Page type analysis: {
  hasCategoryLinks: false,
  categoryCount: 0,
  hasDetailedActivities: false,
  categories: []
}

ğŸ“‚ Expanding all activity sections hierarchically...
  Found 8 frames on the page
  ğŸ“ Expansion round 1...
PAGE LOG: Found 2 activity-related links
PAGE LOG: Found 0 category bars
PAGE LOG: Found 0 detail links
    âœ“ Expanded 0 sections
  âœ… Total sections expanded: 0
ğŸ“¸ Screenshot saved: results-expanded-final.png - showing all expanded sections
PAGE LOG: Found 0 detail rows
PAGE LOG: Found 0 activity items
PAGE LOG: Found 0 table rows
PAGE LOG: Trying alternative extraction...

âœ… Extracted 11 activities from results page
Sample activities found: [
  {
    name: 'Delbrook Community RecreationÂ Centre',
    cost: 0,
    location: 'Bronze Cross       Delbrook Community RecreationÂ Centre'
  },
  {
    name: 'Ron Andrews Community Recreation Centre',
    cost: 194.65,
    location: 'Bronze Medallion       Ron Andrews Community Recreation Centre'
  },
  {
    name: 'John Braithwaite Community Centre',
    cost: 124.05,
    location: '6yrs       John Braithwaite Community Centre'
  },
  {
    name: 'Parkgate Community Centre',
    cost: 155.05,
    location: '12yrs       Parkgate Community Centre'
  },
  {
    name: 'Lions Gate Community Recreation Centre',
    cost: 198.4,
    location: '15yrs       Lions Gate Community Recreation Centre'
  }
]

âœ… Successfully scraped 11 REAL activities
ğŸ’¾ Results saved to /Users/mike/Development/KidsActivityTracker/backend/nvrc_real_activities_2025-07-23T19-56-55-123Z.json

ğŸ”š Closing browser...
